<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OAK-D Viewer</title>
  <link rel="stylesheet" href="/static/style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uplot@1.6.30/dist/uPlot.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
</head>
<body>
  <div id="app">
    <!-- Sidebar -->
    <aside id="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <span class="logo-icon">&#9678;</span>
          <span class="logo-text">OAK-D<span class="logo-dim">/viewer</span></span>
        </div>
      </div>
      <nav id="breadcrumb" class="breadcrumb"></nav>
      <div id="file-tree" class="file-tree">
        <div class="tree-empty">Configure S3 bucket to browse recordings</div>
      </div>
    </aside>

    <!-- Main -->
    <main id="main">
      <!-- Empty state -->
      <div id="empty-state" class="empty-state">
        <div class="empty-graphic">
          <svg width="120" height="80" viewBox="0 0 120 80" fill="none">
            <rect x="2" y="10" width="50" height="35" rx="2" stroke="var(--c-border)" stroke-width="1.5" stroke-dasharray="4 3"/>
            <rect x="68" y="10" width="50" height="35" rx="2" stroke="var(--c-border)" stroke-width="1.5" stroke-dasharray="4 3"/>
            <line x1="10" y1="60" x2="110" y2="60" stroke="var(--c-border)" stroke-width="1" stroke-dasharray="2 2"/>
            <polyline points="10,75 30,65 50,72 70,62 90,70 110,64" stroke="var(--c-accent)" stroke-width="1.5" fill="none" opacity="0.4"/>
          </svg>
        </div>
        <p class="empty-title">No recording loaded</p>
        <p class="empty-sub">Select a recording folder from the sidebar</p>
      </div>

      <!-- Recording view -->
      <div id="recording-view" class="recording-view" style="display:none">
        <!-- Info bar -->
        <div id="info-bar" class="info-bar">
          <span id="info-id" class="info-tag"></span>
          <span id="info-duration" class="info-tag"></span>
          <span id="info-fps" class="info-tag"></span>
          <span id="info-resolution" class="info-tag"></span>
        </div>

        <!-- Video panel -->
        <div class="video-panel">
          <div class="video-container">
            <div class="video-label">RGB</div>
            <video id="video-rgb" preload="auto" playsinline></video>
          </div>
          <div class="video-container">
            <div class="video-label">DEPTH</div>
            <video id="video-depth" preload="auto" playsinline muted></video>
          </div>
        </div>

        <!-- Transport controls -->
        <div class="transport">
          <button id="btn-play" class="transport-btn" title="Play/Pause">
            <svg id="icon-play" width="18" height="18" viewBox="0 0 18 18"><polygon points="4,2 16,9 4,16" fill="currentColor"/></svg>
            <svg id="icon-pause" width="18" height="18" viewBox="0 0 18 18" style="display:none"><rect x="3" y="2" width="4" height="14" fill="currentColor"/><rect x="11" y="2" width="4" height="14" fill="currentColor"/></svg>
          </button>
          <span id="time-current" class="transport-time">0:00</span>
          <div class="seek-track">
            <input id="seek-bar" type="range" min="0" max="1000" value="0" step="1">
            <div id="seek-fill" class="seek-fill"></div>
          </div>
          <span id="time-total" class="transport-time">0:00</span>
        </div>

        <!-- IMU charts -->
        <div class="imu-panel">
          <div class="chart-wrapper">
            <div class="chart-label">ACCELEROMETER <span class="chart-unit">m/s&sup2;</span></div>
            <div id="chart-accel" class="chart-target"></div>
          </div>
          <div class="chart-wrapper">
            <div class="chart-label">GYROSCOPE <span class="chart-unit">rad/s</span></div>
            <div id="chart-gyro" class="chart-target"></div>
          </div>
        </div>
      </div>

      <!-- Processing overlay -->
      <div id="progress-overlay" class="progress-overlay" style="display:none">
        <div class="progress-card">
          <div class="progress-title">Processing Recording</div>
          <div id="progress-stage" class="progress-stage">Initializing...</div>
          <div class="progress-track">
            <div id="progress-fill" class="progress-fill"></div>
          </div>
          <div id="progress-detail" class="progress-detail"></div>
        </div>
      </div>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/uplot@1.6.30/dist/uPlot.iife.min.js"></script>
  <script src="/static/app.js"></script>
</body>
</html>
